!function(){"use strict";const e=new WeakMap,t=t=>{if(e.has(t))return;e.set(t,!0),t.closest("table").classList.add("rte-table-wizard");const o=t.querySelector("button")||document.createElement("button"),a=t.querySelector("div")||document.createElement("div"),i=t.querySelector("textarea");o.type="button",o.className="tl_submit rte-edit",o.innerText=t.closest("#tl_tablewizard").dataset.rteLabel,o.addEventListener("click",(()=>n(a,i))),a.className="rte-content",a.innerHTML=i.value,t.prepend(o,a),t.querySelector("textarea").style.display="none"},n=(e,t)=>{const n=t.closest("#tl_tablewizard").dataset.rteUrl,o=new SimpleModal({width:"80vw",draggable:!1,overlayOpacity:.5,onShow:function(){document.body.style.overflow="hidden"},onHide:function(){document.body.style.overflow=""},onAppend:function(){const t=window.frames["simple-modal-iframe"];void 0!==t?t.onload=function(){t.document.getElementById("rte-table-editor").value=e.innerHTML,setTimeout((function(){t.tinyMCE.activeEditor.setContent(e.innerHTML)}),100),o.buttons.forEach((function(e){e.classList.remove("btn-disabled")}))}:alert("Could not find the SimpleModal frame")}});o.addButton(Contao.lang.cancel,"btn",(function(){this.hide()})),o.addButton(Contao.lang.apply,"btn primary",(function(){const n=window.frames["simple-modal-iframe"];if(void 0===n)return void alert("Could not find the SimpleModal frame");const o=n.tinyMCE.activeEditor.getContent();t.value=o,e.innerHTML=o,this.hide()})),o.show({model:"modal",title:t.closest("#tl_tablewizard").dataset.rteLabel,contents:`<iframe src="${n}" name="simple-modal-iframe" width="100%" height="${.8*window.innerHeight}" frameborder="0"></iframe>`})};document.querySelectorAll("#tl_tablewizard .tcontainer").forEach(t),new MutationObserver((function(e){for(const n of e)"childList"===n.type&&n.addedNodes.forEach((function(e){console.log(e),e.matches&&e.matches("#tl_tablewizard .tcontainer")?t(e):e.matches&&e.matches("#tl_tablewizard *")&&e.querySelectorAll(".tcontainer").forEach((e=>{t(e)}))}))})).observe(document,{attributes:!1,childList:!0,subtree:!0})}();
//# sourceMappingURL=table-wizard.3362f8bc.js.map